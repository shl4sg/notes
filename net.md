#### ARP协议

ARP（Address Resolution Protocol）即地址解析协议， 用于实现从 IP 地址到 MAC 地址的映射，即询问目标IP对应的MAC地址。

工作原理

每个主机都会有自己的ARP缓存区中建立一个ARP列表，以表示IP地址和MAC地址之间的对应关系。当源主机要发送数据时，首先检测ARP列表中是否对应IP地址的目的主机的MAC地址，如果有，则直接发送数据，如果没有，就向本网段的所有主机发送ARP数据包。

内容:我是IP地址，mac地址，谁是IP地址，mac?
当本网络的所有主机收到该ARP数据包时，首先检查数据包中的IP地址是否是自己的IP地址，如果不是，则忽略该数据包。如果是，则首先从数据包中取出源主机的IP和mac地址写入到ARP列表中，如果以存在，则覆盖。然后将自己的mac地址写入arp响应包中，告诉源主机自己是它想要找的mac地址。源主机收到ARP响应包后，将目的主机的IP和mac地址写入arp列表，并利用此信息发送数据。如果源主机一直没有收到arp响应数据包，表示arp查询失败。

#### 访问网站过程

#### tcp连接建立过程

第一次握手：客户端发送SYN包至服务器，seq为随机值x,并进入SYN_SENT状态，等待服务器确认

第二次握手：服务器收到客户端的SYN包，发送一个ACK包,标志位ack和syn都为1，seq随机值=y,ack=x+1此时服务器进入SYN_RCVD状态

第三次握手：客户端接收到服务器发送的SYN+ACK后，进入ESTABLISHED状态，并发送确认ACK包，ack=y+1服务器接收到客户端ACK后，进入ESTABLISHED状态

ack=对方的syn+1+len

#### tcp连接关闭过程

第一次挥手：主动关闭方发送一个FIN+ACK包并进入FIN_WAIT1状态

第二次挥手：被动关闭方接收到主动关闭方发送的FIN并发送ACK，此时被动关闭方进入CLOSE_WAIT状态；主动关闭方收到被动关闭方的ACK后，进入FIN_WAIT2状态

第三次挥手：被动关闭方发送一个FIN并进入LAST_ACK状态

第四次挥手：主动关闭方收到被动关闭方发送的FIN并发送ACK，此时主动关闭方进入TIME_WAIT状态，经过2MSL(最大段生存期)时间后关闭连接；被动关闭方收到主动关闭方的ACK后，关闭连接